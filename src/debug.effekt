import framebuffer

interface Debug {
  def print(value: String): Unit
  def println(value: String): Unit
}

def debug { prog: => Nothing / Debug }: Nothing = {
  try prog()
  with Debug {
    def print(value) = resume(framebuffer::print(value))
    def println(value) = resume(framebuffer::print("${value}\n"))
  }
}